<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>USC Ridesharing</title>
    <style>
          #map {
      width:100%;
      height:400px;
      background-color: grey;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <div id="brum" style="background-color: pink; width: 100%; height: 100px;" onclick="ba();"></div>
    <script>
        let waypoints  = [];
        let cities = [];
        function initMap() {
            let southCarolina = {lat: 33.8361, lng: -81.1637};
            let map = new google.maps.Map(
                document.getElementById('map'), {zoom: 7, center: southCarolina}
            );
            //defining important locations
            let columbia = {lat: 34.0007, lng: -81.0348};
            let charleston = {lat: 32.7765, lng: -79.9311};
            //let marker1 = new google.maps.Marker({position: columbia, map: map});
            //let marker2 = new google.maps.Marker({position: charleston, map: map});
            var placesService = new google.maps.places.PlacesService(map) //googlemap
            let c = charleston.lat;
            let d = charleston.lng;
            /*
            let brom = {lat: c, lng: d};
            let marker = new google.maps.Marker({position: brom, map: map});
            */
            var pyrmont = new google.maps.LatLng(c,d); //generating LatLng object for places service
            var request2 = { //request generating a radius around a point and getting all the localities in that radius
              location: pyrmont,
              radius: '50000',
              query: 'locality'
            };
            placesService.textSearch(request2, callback);

            function callback(results, status) {
              if(status == google.maps.places.PlacesServiceStatus.OK) { //if request is successful
                for (var i = 0; i < results.length; i++)
                {
                    var place = results[i];
                    //createMarker(results[i]);
                    new google.maps.Marker({ //placing markers on the map for each locality found
                    position: results[i].geometry.location,
                    map,
                    title: "Hello World!"
                  });
                  //document.getElementById("brum").innerHTML += ", "+results[i].formatted_address;
                  //const myArray = results[i].formatted_address.split(",");
                  //let word = myArray[0];
                  let word = results[i].formatted_address; //getting the locality name
                  let bool = false;
                  for(var z = 0; z < cities.length; z++)
                  {
                    if(word == cities[z]) //checks for duplicate cities
                    {
                      bool = true;
                      break;
                    }
                  }
                  if(!bool)
                  {
                  cities.push(word);
                  }
                }
              }
            }
          }
        function ba() {
          for(var i = 0; i < cities.length; i++)
          {
            document.getElementById("brum").innerHTML += cities[i];
            document.getElementById("brum").innerHTML += ",\n";
          }
          document.getElementById("brum").innerHTML+=cities.length;
        }
    </script>
    <script async src=""></script>
  </body>
  </html>

